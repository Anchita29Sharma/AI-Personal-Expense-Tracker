{% extends "base.html" %}

{% block content %}
<h2 class="dashboard-title">Dashboard</h2>

<div class="card-grid">
    <div class="card">
        <h3>Total Expense</h3>
        <p>â‚¹ {{ total }}</p>
    </div>

    <div class="card">
        <h3>Top Spending Category</h3>
        <p>{{ category }}</p>
    </div>
</div>

<div class="card" style="margin-top:30px;">
    <h3>Category-wise Expenses</h3>

    {% if chart_labels and chart_values %}
        <canvas id="categoryChart"></canvas>
    {% else %}
        <p style="text-align:center; color:#6b7280;">
            No expense data available. Add expenses to see chart ðŸ“Š
        </p>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% if chart_labels and chart_values %}
<script>
const labels = {{ chart_labels | tojson }};
const values = {{ chart_values | tojson }};

const data = {
    labels: labels,
    datasets: [{
        label: 'Expenses',
        data: values,
        backgroundColor: [
            '#2563eb',
            '#16a34a',
            '#dc2626',
            '#f59e0b',
            '#7c3aed'
        ]
    }]
};

new Chart(document.getElementById('categoryChart'), {
    type: 'bar',
    data: data,
    options: {
        responsive: true,
        plugins: {
            legend: {
                display: false
            }
        }
    }
});
</script>
{% endif %}

{% endblock %}
